#import "./misc.graphql"

fragment TaskSettingsFragment on ITaskSettings {
    allow
    coolDown {
        min {
            ...Duration
        }
        max {
            ...Duration
        }
    }
}

fragment AutoUnitsUnitSettingsFragment on AutoUnitsUnitSettings {
    autoBuild
    index
    targetAmount
    trainForever
}

fragment AutoUnitsBuildingSettingsFragment on AutoUnitsBuildingSettings {
    allow
    maxBuildTime {
        ...Duration
    }
    units {
        ...AutoUnitsUnitSettingsFragment
    }
}

query GetGeneralSettings {
    generalSettings {
        allowTasks
        autoBuild
        autoUnits
    }
}

query GetHeroSettings {
    hero {
        autoAdventure {
            ...TaskSettingsFragment
            adventureCriteria
            hardMinHealth
            normalMinHealth
            maxTravelTime {
                ...Duration
            }
            preferHard
            preferredVillageId
        }
    }
}

query GetGeneralVillageSettings($villageId: Int!) {
    generalVillageSettings(villageId: $villageId) {
        allowTasks
    }
}

query GetAutoBuildSettings($villageId: Int!) {
    autoBuildSettings(villageId: $villageId) {
        ...TaskSettingsFragment
        autoCropFields
        minCrop
    }
}

query GetAutoUnitsSettings($villageId: Int!) {
    autoUnitsSettings(villageId: $villageId) {
        ...TaskSettingsFragment
        minCrop
        barracks {
            ...AutoUnitsBuildingSettingsFragment
        }
        stable {
            ...AutoUnitsBuildingSettingsFragment
        }
        workshop {
            ...AutoUnitsBuildingSettingsFragment
        }
        residence {
            ...AutoUnitsBuildingSettingsFragment
        }
    }
}

mutation UpdateGeneralSettings($input: UpdateGeneralSettingsInput!) {
    updateGeneralSettings(input: $input)
}

mutation UpdateAutoAdventureSettings($input: UpdateAutoAdventureSettingsInput!) {
    updateAutoAdventureSettings(input: $input)
}

mutation UpdateGeneralVillageSettings($input: UpdateGeneralVillageSettingsInput!) {
    updateGeneralVillageSettings(input: $input)
}

mutation UpdateAutoBuildVillageSettings($input: UpdateAutoBuildVillageSettingsInput!) {
    updateAutoBuildVillageSettings(input: $input)
}

mutation UpdateAutoUnitsUnitSettings($input: UpdateAutoUnitsUnitSettingsInput!) {
    updateAutoUnitsUnitSettings(input: $input)
}

mutation UpdateAutoUnitsBuildingSettings($input: UpdateAutoUnitsBuildingSettingsInput!) {
    updateAutoUnitsBuildingSettings(input: $input)
}

mutation UpdateAutoUnitsSettings($input: UpdateAutoUnitsSettingsInput!) {
    updateAutoUnitsSettings(input: $input)
}

mutation ResetGeneralSettings {
    resetGeneralSettings
}

mutation ResetAutoAdventureSettings {
    resetAutoAdventureSettings
}

mutation ResetGeneralVillageSettings($input: ResetVillageInput!) {
    resetGeneralVillageSettings(input: $input)
}

mutation ResetAutoBuildSettings($input: ResetVillageInput!) {
    resetAutoBuildSettings(input: $input)
}

mutation ResetAutoUnitsSettings($input: ResetVillageInput!) {
    resetAutoUnitsSettings(input: $input)
}