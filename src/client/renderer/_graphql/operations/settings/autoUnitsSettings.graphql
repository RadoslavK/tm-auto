#import "./misc.graphql"

fragment AutoUnitsUnitSettings on AutoUnitsUnitSettings {
    autoBuild
    index
    targetAmount
    trainForever
}

fragment AutoUnitsBuildingSettings on AutoUnitsBuildingSettings {
    allow
    maxBuildTime {
        ...Duration
    }
    units {
        ...AutoUnitsUnitSettings
    }
}

fragment AutoUnitsSettings on AutoUnitsSettings {
    allow
    useHeroResources
    coolDown {
        ...CoolDown
    }
    minCrop
    barracks {
        ...AutoUnitsBuildingSettings
    }
    stable {
        ...AutoUnitsBuildingSettings
    }
    workshop {
        ...AutoUnitsBuildingSettings
    }
    residence {
        ...AutoUnitsBuildingSettings
    }
}

query GetAutoUnitsSettings($villageId: ID!) {
    autoUnitsSettings(villageId: $villageId) {
        ...AutoUnitsSettings
    }
}

mutation UpdateAutoUnitsUnitSettings($villageId: ID!, $settings: UpdateAutoUnitsUnitSettingsInput!) {
    updateAutoUnitsUnitSettings(villageId: $villageId, settings: $settings) {
        ...AutoUnitsSettings
    }
}

mutation UpdateAutoUnitsBuildingSettings($villageId: ID!, $buildingType: Int!, $settings: UpdateAutoUnitsBuildingSettingsInput!) {
    updateAutoUnitsBuildingSettings(villageId: $villageId, buildingType: $buildingType, settings: $settings) {
        ...AutoUnitsSettings
    }
}

mutation UpdateAutoUnitsSettings($villageId: ID!, $settings: UpdateAutoUnitsSettingsInput!) {
    updateAutoUnitsSettings(villageId: $villageId, settings: $settings) {
        ...AutoUnitsSettings
    }
}

mutation ResetAutoUnitsSettings($villageId: ID!) {
    resetAutoUnitsSettings(villageId: $villageId) {
        ...AutoUnitsSettings
    }
}